{
  "hash": "acdbacd8c284c3a7f26be96a7d5f664b",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Session 12 Code\"\nformat: html\n---\n\n\n## Read in packages:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(sf)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLinking to GEOS 3.11.2, GDAL 3.8.2, PROJ 9.3.1; sf_use_s2() is TRUE\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(terra)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nterra 1.7.78\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(spDataLarge)\nlibrary(tigris)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nTo enable caching of data, set `options(tigris_use_cache = TRUE)`\nin your R script or .Rprofile.\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'tigris'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following object is masked from 'package:terra':\n\n    blocks\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ tidyr::extract() masks terra::extract()\n✖ dplyr::filter()  masks stats::filter()\n✖ dplyr::lag()     masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n:::\n\n\n## Changing resolution:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nr <- rast()\nr\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nclass       : SpatRaster \ndimensions  : 180, 360, 1  (nrow, ncol, nlyr)\nresolution  : 1, 1  (x, y)\nextent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)\ncoord. ref. : lon/lat WGS 84 (CRS84) (OGC:CRS84) \n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nvalues(r) <- 1:ncell(r)\nplot(r)\n```\n\n::: {.cell-output-display}\n![](session-12-example_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nra <- aggregate(r, 20)\nra\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nclass       : SpatRaster \ndimensions  : 9, 18, 1  (nrow, ncol, nlyr)\nresolution  : 20, 20  (x, y)\nextent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)\ncoord. ref. : lon/lat WGS 84 (CRS84) (OGC:CRS84) \nsource(s)   : memory\nname        :   lyr.1 \nmin value   :  3430.5 \nmax value   : 61370.5 \n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# rarely used\nrd <- disagg(r, 20)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n|---------|---------|---------|---------|\n=\n                                          \n```\n\n\n:::\n\n```{.r .cell-code}\nplot(rd)\n```\n\n::: {.cell-output-display}\n![](session-12-example_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n## Crop and Mask\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsrtm = rast(system.file(\"raster/srtm.tif\", package = \"spDataLarge\"))\nzion = read_sf(system.file(\"vector/zion.gpkg\", package = \"spDataLarge\"))\nzion = st_transform(zion, crs(srtm))\n\ncrs(srtm) == crs(zion)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] TRUE\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsrtm.crop <- crop(x=srtm, y=zion, snap=\"near\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsrtm.crop.msk <- crop(x=srtm, y=vect(zion), snap=\"near\", mask=TRUE)\nplot(srtm.crop.msk)\n```\n\n::: {.cell-output-display}\n![](session-12-example_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsrtm.msk <- mask(srtm.crop, vect(zion), updatevalue=-1000)\nplot(srtm.msk)\n```\n\n::: {.cell-output-display}\n![](session-12-example_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsrtm.msk2 <- mask(srtm.crop, vect(zion), inverse=TRUE, updatevalue=-1000)\n```\n:::\n\n\n## Extend\n\n\n::: {.cell}\n\n```{.r .cell-code}\nzion.buff <-  zion %>% \n  st_buffer(., 10000)\nsrtm.ext <- extend(srtm, vect(zion.buff))\next(srtm.ext)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSpatExtent : -113.343749879444, -112.74541654615, 37.0479167631968, 37.5979167631601 (xmin, xmax, ymin, ymax)\n```\n\n\n:::\n\n```{.r .cell-code}\nplot(srtm.ext)\nplot(st_geometry(zion.buff), add=TRUE)\n```\n\n::: {.cell-output-display}\n![](session-12-example_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n## Practice\n\nLoad data:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nid <- rast(\"/opt/data/data/rasterexample/Copy of CRPS_ID.tif\")\nor <- rast(\"/opt/data/data/rasterexample/Copy of CRPS_OR.tif\")\n```\n:::\n\n\n\n\n### Aggregate\n\n\n::: {.cell}\n\n```{.r .cell-code}\nid_agg <- aggregate(id, fact = 30)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n|---------|---------|---------|---------|\n=========================================\n                                          \n```\n\n\n:::\n\n```{.r .cell-code}\nor_agg <- aggregate(or, fact = 30)\n```\n:::\n\n\n### Check for alignment\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncrs(id_agg) == crs(or_agg)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] TRUE\n```\n\n\n:::\n\n```{.r .cell-code}\norigin(id_agg) == origin(or_agg)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] FALSE FALSE\n```\n\n\n:::\n\n```{.r .cell-code}\next(id_agg) == ext(or_agg)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] FALSE\n```\n\n\n:::\n:::\n\n\n### Align the origins\n\nBoth `project` and `resample` don't give the intended results.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nid_proj <- project(id_agg, or_agg)\n\nid_resamp <- resample(id_agg, or_agg)\n\npar(mfrow = c(1,2))\nplot(id_proj)\nplot(id_resamp)\n```\n\n::: {.cell-output-display}\n![](session-12-example_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\nWe need to extend, then resample. Resample is the faster choice because the CRS's of the the two rasters already match.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nid_ext <- extend(id_agg, or_agg)\nor_ext <- extend(or_agg, id_ext)\n\nid_resamp <- resample(id_ext, or_ext)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncrs(id_resamp) == crs(or_ext)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] TRUE\n```\n\n\n:::\n\n```{.r .cell-code}\norigin(id_resamp) == origin(or_ext)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] TRUE TRUE\n```\n\n\n:::\n\n```{.r .cell-code}\next(id_resamp) == ext(or_ext)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] TRUE\n```\n\n\n:::\n:::\n\n\n### Mosaic\n\n\n::: {.cell}\n\n```{.r .cell-code}\nidor <- mosaic(id_resamp, or_ext)\n```\n:::\n\n\n### Crops and Masks\n\n\n::: {.cell}\n\n```{.r .cell-code}\nidor_counties <- counties(state = c(\"ID\", \"OR\"))\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRetrieving data for the year 2022\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n  |                                                                            \n  |                                                                      |   0%\n  |                                                                            \n  |                                                                      |   1%\n  |                                                                            \n  |=                                                                     |   1%\n  |                                                                            \n  |=                                                                     |   2%\n  |                                                                            \n  |==                                                                    |   3%\n  |                                                                            \n  |===                                                                   |   4%\n  |                                                                            \n  |===                                                                   |   5%\n  |                                                                            \n  |=====                                                                 |   7%\n  |                                                                            \n  |=====                                                                 |   8%\n  |                                                                            \n  |======                                                                |   8%\n  |                                                                            \n  |======                                                                |   9%\n  |                                                                            \n  |=======                                                               |   9%\n  |                                                                            \n  |=======                                                               |  10%\n  |                                                                            \n  |========                                                              |  11%\n  |                                                                            \n  |=========                                                             |  13%\n  |                                                                            \n  |=========                                                             |  14%\n  |                                                                            \n  |==========                                                            |  14%\n  |                                                                            \n  |==========                                                            |  15%\n  |                                                                            \n  |===========                                                           |  15%\n  |                                                                            \n  |===========                                                           |  16%\n  |                                                                            \n  |============                                                          |  16%\n  |                                                                            \n  |============                                                          |  17%\n  |                                                                            \n  |============                                                          |  18%\n  |                                                                            \n  |=============                                                         |  18%\n  |                                                                            \n  |==============                                                        |  20%\n  |                                                                            \n  |==============                                                        |  21%\n  |                                                                            \n  |===============                                                       |  21%\n  |                                                                            \n  |================                                                      |  23%\n  |                                                                            \n  |=================                                                     |  24%\n  |                                                                            \n  |=================                                                     |  25%\n  |                                                                            \n  |==================                                                    |  25%\n  |                                                                            \n  |==================                                                    |  26%\n  |                                                                            \n  |===================                                                   |  27%\n  |                                                                            \n  |===================                                                   |  28%\n  |                                                                            \n  |====================                                                  |  28%\n  |                                                                            \n  |====================                                                  |  29%\n  |                                                                            \n  |=====================                                                 |  29%\n  |                                                                            \n  |======================                                                |  31%\n  |                                                                            \n  |=======================                                               |  33%\n  |                                                                            \n  |=======================                                               |  34%\n  |                                                                            \n  |========================                                              |  34%\n  |                                                                            \n  |========================                                              |  35%\n  |                                                                            \n  |=========================                                             |  35%\n  |                                                                            \n  |=========================                                             |  36%\n  |                                                                            \n  |==========================                                            |  36%\n  |                                                                            \n  |==========================                                            |  37%\n  |                                                                            \n  |==========================                                            |  38%\n  |                                                                            \n  |===========================                                           |  38%\n  |                                                                            \n  |===========================                                           |  39%\n  |                                                                            \n  |============================                                          |  39%\n  |                                                                            \n  |============================                                          |  40%\n  |                                                                            \n  |============================                                          |  41%\n  |                                                                            \n  |=============================                                         |  41%\n  |                                                                            \n  |=============================                                         |  42%\n  |                                                                            \n  |==============================                                        |  43%\n  |                                                                            \n  |===============================                                       |  45%\n  |                                                                            \n  |================================                                      |  45%\n  |                                                                            \n  |================================                                      |  46%\n  |                                                                            \n  |=================================                                     |  46%\n  |                                                                            \n  |=================================                                     |  47%\n  |                                                                            \n  |=================================                                     |  48%\n  |                                                                            \n  |==================================                                    |  48%\n  |                                                                            \n  |==================================                                    |  49%\n  |                                                                            \n  |===================================                                   |  49%\n  |                                                                            \n  |===================================                                   |  50%\n  |                                                                            \n  |====================================                                  |  51%\n  |                                                                            \n  |====================================                                  |  52%\n  |                                                                            \n  |=====================================                                 |  52%\n  |                                                                            \n  |======================================                                |  54%\n  |                                                                            \n  |=======================================                               |  56%\n  |                                                                            \n  |========================================                              |  56%\n  |                                                                            \n  |========================================                              |  57%\n  |                                                                            \n  |========================================                              |  58%\n  |                                                                            \n  |=========================================                             |  58%\n  |                                                                            \n  |=========================================                             |  59%\n  |                                                                            \n  |==========================================                            |  59%\n  |                                                                            \n  |==========================================                            |  60%\n  |                                                                            \n  |==========================================                            |  61%\n  |                                                                            \n  |===========================================                           |  61%\n  |                                                                            \n  |===========================================                           |  62%\n  |                                                                            \n  |============================================                          |  62%\n  |                                                                            \n  |============================================                          |  63%\n  |                                                                            \n  |============================================                          |  64%\n  |                                                                            \n  |=============================================                         |  64%\n  |                                                                            \n  |==============================================                        |  66%\n  |                                                                            \n  |================================================                      |  68%\n  |                                                                            \n  |================================================                      |  69%\n  |                                                                            \n  |=================================================                     |  69%\n  |                                                                            \n  |=================================================                     |  70%\n  |                                                                            \n  |=================================================                     |  71%\n  |                                                                            \n  |==================================================                    |  71%\n  |                                                                            \n  |===================================================                   |  73%\n  |                                                                            \n  |===================================================                   |  74%\n  |                                                                            \n  |====================================================                  |  74%\n  |                                                                            \n  |====================================================                  |  75%\n  |                                                                            \n  |=====================================================                 |  75%\n  |                                                                            \n  |=====================================================                 |  76%\n  |                                                                            \n  |======================================================                |  78%\n  |                                                                            \n  |=======================================================               |  79%\n  |                                                                            \n  |========================================================              |  79%\n  |                                                                            \n  |========================================================              |  80%\n  |                                                                            \n  |========================================================              |  81%\n  |                                                                            \n  |=========================================================             |  81%\n  |                                                                            \n  |=========================================================             |  82%\n  |                                                                            \n  |==========================================================            |  82%\n  |                                                                            \n  |==========================================================            |  83%\n  |                                                                            \n  |==========================================================            |  84%\n  |                                                                            \n  |===========================================================           |  84%\n  |                                                                            \n  |===========================================================           |  85%\n  |                                                                            \n  |============================================================          |  85%\n  |                                                                            \n  |============================================================          |  86%\n  |                                                                            \n  |=============================================================         |  86%\n  |                                                                            \n  |=============================================================         |  87%\n  |                                                                            \n  |=============================================================         |  88%\n  |                                                                            \n  |==============================================================        |  88%\n  |                                                                            \n  |===============================================================       |  90%\n  |                                                                            \n  |================================================================      |  92%\n  |                                                                            \n  |==================================================================    |  94%\n  |                                                                            \n  |==================================================================    |  95%\n  |                                                                            \n  |===================================================================   |  95%\n  |                                                                            \n  |===================================================================   |  96%\n  |                                                                            \n  |====================================================================  |  97%\n  |                                                                            \n  |====================================================================  |  98%\n  |                                                                            \n  |===================================================================== |  98%\n  |                                                                            \n  |======================================================================| 100%\n```\n\n\n:::\n\n```{.r .cell-code}\neast_id <- idor_counties %>%\n  filter(NAME %in% c(\"Teton\", \"Jefferson\", \"Madison\"))\nplot(st_geometry(east_id))\n```\n\n::: {.cell-output-display}\n![](session-12-example_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n\n\n`mask` without `crop` leaves a lot of white space.\n\n\n::: {.cell}\n\n```{.r .cell-code}\neast_id_proj <- st_transform(east_id, crs(idor))\n\neast_id_fire <- mask(x = idor, mask = east_id_proj)\n\neast_id_fire2 <- crop(idor, east_id_proj, mask=TRUE)\n```\n:::\n\n---\ntitle: \"Session 12 Code\"\nformat: html\n---\n\n\n## Read in packages:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(sf)\nlibrary(terra)\nlibrary(spDataLarge)\nlibrary(tigris)\nlibrary(tidyverse)\n```\n:::\n\n\n## Changing resolution:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nr <- rast()\nr\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nclass       : SpatRaster \ndimensions  : 180, 360, 1  (nrow, ncol, nlyr)\nresolution  : 1, 1  (x, y)\nextent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)\ncoord. ref. : lon/lat WGS 84 (CRS84) (OGC:CRS84) \n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nvalues(r) <- 1:ncell(r)\nplot(r)\n```\n\n::: {.cell-output-display}\n![](session-12-example_files/figure-html/unnamed-chunk-24-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nra <- aggregate(r, 20)\nra\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nclass       : SpatRaster \ndimensions  : 9, 18, 1  (nrow, ncol, nlyr)\nresolution  : 20, 20  (x, y)\nextent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)\ncoord. ref. : lon/lat WGS 84 (CRS84) (OGC:CRS84) \nsource(s)   : memory\nname        :   lyr.1 \nmin value   :  3430.5 \nmax value   : 61370.5 \n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# rarely used\nrd <- disagg(r, 20)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n|---------|---------|---------|---------|\n=\n                                          \n```\n\n\n:::\n\n```{.r .cell-code}\nplot(rd)\n```\n\n::: {.cell-output-display}\n![](session-12-example_files/figure-html/unnamed-chunk-26-1.png){width=672}\n:::\n:::\n\n\n## Crop and Mask\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsrtm = rast(system.file(\"raster/srtm.tif\", package = \"spDataLarge\"))\nzion = read_sf(system.file(\"vector/zion.gpkg\", package = \"spDataLarge\"))\nzion = st_transform(zion, crs(srtm))\n\ncrs(srtm) == crs(zion)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] TRUE\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsrtm.crop <- crop(x=srtm, y=zion, snap=\"near\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsrtm.crop.msk <- crop(x=srtm, y=vect(zion), snap=\"near\", mask=TRUE)\nplot(srtm.crop.msk)\n```\n\n::: {.cell-output-display}\n![](session-12-example_files/figure-html/unnamed-chunk-29-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsrtm.msk <- mask(srtm.crop, vect(zion), updatevalue=-1000)\nplot(srtm.msk)\n```\n\n::: {.cell-output-display}\n![](session-12-example_files/figure-html/unnamed-chunk-30-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsrtm.msk2 <- mask(srtm.crop, vect(zion), inverse=TRUE, updatevalue=-1000)\n```\n:::\n\n\n## Extend\n\n\n::: {.cell}\n\n```{.r .cell-code}\nzion.buff <-  zion %>% \n  st_buffer(., 10000)\nsrtm.ext <- extend(srtm, vect(zion.buff))\next(srtm.ext)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSpatExtent : -113.343749879444, -112.74541654615, 37.0479167631968, 37.5979167631601 (xmin, xmax, ymin, ymax)\n```\n\n\n:::\n\n```{.r .cell-code}\nplot(srtm.ext)\nplot(st_geometry(zion.buff), add=TRUE)\n```\n\n::: {.cell-output-display}\n![](session-12-example_files/figure-html/unnamed-chunk-32-1.png){width=672}\n:::\n:::\n\n\n## Practice\n\nLoad data:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nid <- rast(\"/opt/data/data/rasterexample/Copy of CRPS_ID.tif\")\nor <- rast(\"/opt/data/data/rasterexample/Copy of CRPS_OR.tif\")\n```\n:::\n\n\n\n\n### Aggregate\n\n\n::: {.cell}\n\n```{.r .cell-code}\nid_agg <- aggregate(id, fact = 30)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n|---------|---------|---------|---------|\n=========================================\n                                          \n```\n\n\n:::\n\n```{.r .cell-code}\nor_agg <- aggregate(or, fact = 30)\n```\n:::\n\n\n### Check for alignment\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncrs(id_agg) == crs(or_agg)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] TRUE\n```\n\n\n:::\n\n```{.r .cell-code}\norigin(id_agg) == origin(or_agg)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] FALSE FALSE\n```\n\n\n:::\n\n```{.r .cell-code}\next(id_agg) == ext(or_agg)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] FALSE\n```\n\n\n:::\n:::\n\n\n### Align the origins\n\nBoth `project` and `resample` don't give the intended results.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nid_proj <- project(id_agg, or_agg)\n\nid_resamp <- resample(id_agg, or_agg)\n\npar(mfrow = c(1,2))\nplot(id_proj)\nplot(id_resamp)\n```\n\n::: {.cell-output-display}\n![](session-12-example_files/figure-html/unnamed-chunk-37-1.png){width=672}\n:::\n:::\n\n\nWe need to extend, then resample. Resample is the faster choice because the CRS's of the the two rasters already match.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nid_ext <- extend(id_agg, or_agg)\nor_ext <- extend(or_agg, id_ext)\n\nid_resamp <- resample(id_ext, or_ext)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncrs(id_resamp) == crs(or_ext)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] TRUE\n```\n\n\n:::\n\n```{.r .cell-code}\norigin(id_resamp) == origin(or_ext)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] TRUE TRUE\n```\n\n\n:::\n\n```{.r .cell-code}\next(id_resamp) == ext(or_ext)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] TRUE\n```\n\n\n:::\n:::\n\n\n### Mosaic\n\n\n::: {.cell}\n\n```{.r .cell-code}\nidor <- mosaic(id_resamp, or_ext)\n```\n:::\n\n\n### Crops and Masks\n\n\n::: {.cell}\n\n```{.r .cell-code}\nidor_counties <- counties(state = c(\"ID\", \"OR\"))\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRetrieving data for the year 2022\n```\n\n\n:::\n\n```{.r .cell-code}\neast_id <- idor_counties %>%\n  filter(NAME %in% c(\"Teton\", \"Jefferson\", \"Madison\"))\nplot(st_geometry(east_id))\n```\n\n::: {.cell-output-display}\n![](session-12-example_files/figure-html/unnamed-chunk-41-1.png){width=672}\n:::\n:::\n\n\n`mask` without `crop` leaves a lot of white space.\n\n\n::: {.cell}\n\n```{.r .cell-code}\neast_id_proj <- st_transform(east_id, crs(idor))\n\neast_id_fire <- mask(x = idor, mask = east_id_proj)\n\neast_id_fire2 <- crop(idor, east_id_proj, mask=TRUE)\n```\n:::",
    "supporting": [
      "session-12-example_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}